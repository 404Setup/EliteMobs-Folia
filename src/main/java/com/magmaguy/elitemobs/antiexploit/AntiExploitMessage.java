package com.magmaguy.elitemobs.antiexploit;

import com.magmaguy.elitemobs.ChatColorConverter;
import com.magmaguy.elitemobs.config.AntiExploitConfig;
import net.md_5.bungee.api.ChatMessageType;
import net.md_5.bungee.api.chat.TextComponent;
import org.bukkit.Bukkit;
import org.bukkit.entity.Entity;
import org.bukkit.entity.LivingEntity;
import org.bukkit.entity.Player;


public class AntiExploitMessage {

    public static void sendWarning(LivingEntity livingEntity, String code) {

        Bukkit.getLogger().warning("antiexploit firing");

        for (Entity entity : livingEntity.getNearbyEntities(15, 15, 15))
            if (entity instanceof Player) {
                Player player = (Player) entity;
                if (!player.isOp())
                    player.spigot().sendMessage(ChatMessageType.ACTION_BAR,
                            TextComponent.fromLegacyText(ChatColorConverter.convert(
                                    AntiExploitConfig.fileConfiguration.getString(AntiExploitConfig.ANTIEXPLOIT_MESSAGE))));
                else
                    player.spigot().sendMessage(ChatMessageType.ACTION_BAR,
                            TextComponent.fromLegacyText(ChatColorConverter.convert(
                                    AntiExploitConfig.fileConfiguration.getString(AntiExploitConfig.ANTIEXPLOIT_MESSAGE)
                                            + " OP-only:" + code)));
            }

    }

}
